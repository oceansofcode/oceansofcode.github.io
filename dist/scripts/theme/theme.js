import e from"../constants.js";const s={name:"light",switchIcon:"fa-moon",css:"light-theme-css",isLoaded:!1},t={name:"dark",switchIcon:"fa-sun",css:"dark-theme-css",isLoaded:!1},n="color-theme-in-transition",o=1500,a={newTheme:t,oldTheme:s},c={newTheme:s,oldTheme:t},i="hidden-image",m="selected-theme",d=window.matchMedia(`(prefers-color-scheme: ${s.name})`);let r;export const getThemeFromPreference=()=>window.matchMedia(`(prefers-color-scheme: ${s.name})`).matches?s:t;export const saveSelectedTheme=e=>{window.sessionStorage.setItem(m,JSON.stringify(e))};export const getSavedSelectedTheme=()=>{const e=JSON.parse(window.sessionStorage.getItem(m));return e&&(e.isLoaded=!1),e};export const getCurrentTheme=()=>r?.classList.contains(s.name)?s:r?.classList.contains(t.name)?t:null;export const setCustomElementThemeClass=n=>{const o=r?.classList.contains(s.name)?s:r?.classList.contains(t.name)?t:null;n.classList.add(o.name),window.addEventListener(e.THEME_SWITCH_EVENT,(e=>{const{newTheme:s,oldTheme:t}=e.detail;n.classList.add(s?.name),n.classList.remove(t?.name)}))};export const themeSwitchEvent=e=>{const s=()=>{r.classList.add(n),setTimeout((()=>r.classList.remove(n)),o)},i=s=>l(s,e);return d.addEventListener("change",(e=>{s(),window.localStorage.removeItem(m),e.matches?i(c):i(a)})),()=>{s(),r.classList.contains(t.name)?i(c):i(a)}};const l=(s,t)=>{const{newTheme:n,oldTheme:o}=s;var a;a=n,window.sessionStorage.setItem(m,JSON.stringify(a)),n.isLoaded||h(n),r&&(r.classList.add(n.name),o&&r.classList.remove(o.name)),t&&(t.classList.add(n.switchIcon),o&&t.classList.remove(o.switchIcon));document.querySelectorAll(".theme-background").forEach((e=>{e.classList.contains(n.name)&&e.classList.remove(i),o&&e.classList.contains(o.name)&&e.classList.add(i)}));const c=new CustomEvent(e.THEME_SWITCH_EVENT,{detail:s});window.dispatchEvent(c)},h=e=>{document.getElementById(e.css).removeAttribute("disabled"),e.isLoaded=!0};export const themeInit=async()=>{r=await(()=>{let e=100;return new Promise(((s,t)=>{const n=setInterval((()=>{const o=document.querySelector("body");o?(s(o),clearInterval(n)):--e<0&&(t("Could not query select body element"),clearInterval(n))}),10)}))})();const e=e=>l({newTheme:e},void 0),n=getSavedSelectedTheme();n?e(n):d.matches?e(s):e(t)};
//# sourceMappingURL=theme.js.map