import e from"../constants.js";const s={name:"light",switchIcon:"fa-moon",css:"light-theme-css",isLoaded:!1},t={name:"dark",switchIcon:"fa-sun",css:"dark-theme-css",isLoaded:!1},n="color-theme-in-transition",a=1500,c={newTheme:t,oldTheme:s},o={newTheme:s,oldTheme:t},m="hidden-image",i=window.matchMedia(`(prefers-color-scheme: ${s.name})`);let d;export const getThemeFromPreference=()=>window.matchMedia(`(prefers-color-scheme: ${s.name})`).matches?s:t;export const getCurrentTheme=()=>d?.classList.contains(s.name)?s:d?.classList.contains(t.name)?t:null;export const setCustomElementThemeClass=n=>{const a=d?.classList.contains(s.name)?s:d?.classList.contains(t.name)?t:null;n.classList.add(a.name),window.addEventListener(e.THEME_SWITCH_EVENT,(e=>{const{newTheme:s,oldTheme:t}=e.detail;n.classList.add(s?.name),n.classList.remove(t?.name)}))};export const themeSwitchEvent=e=>{const s=()=>{d.classList.add(n),setTimeout((()=>d.classList.remove(n)),a)},m=s=>l(s,e);return i.addEventListener("change",(e=>{s(),e.matches?m(o):m(c)})),()=>{s(),d.classList.contains(t.name)?m(o):m(c)}};const l=(s,t)=>{const{newTheme:n,oldTheme:a}=s;n.isLoaded||r(n),d&&(d.classList.add(n.name),a&&d.classList.remove(a.name)),t&&(t.classList.add(n.switchIcon),a&&t.classList.remove(a.switchIcon));document.querySelectorAll(".theme-background").forEach((e=>{e.classList.contains(n.name)&&e.classList.remove(m),a&&e.classList.contains(a.name)&&e.classList.add(m)}));const c=new CustomEvent(e.THEME_SWITCH_EVENT,{detail:s});window.dispatchEvent(c)},r=e=>{document.getElementById(e.css).removeAttribute("disabled"),e.isLoaded=!0};export const themeInit=async()=>{d=await(()=>{let e=100;return new Promise(((s,t)=>{const n=setInterval((()=>{const a=document.querySelector("body");a?(s(a),clearInterval(n)):--e<0&&(t("Could not query select body element"),clearInterval(n))}),10)}))})();const e=e=>l({newTheme:e},void 0);i.matches?e(s):e(t)};
//# sourceMappingURL=theme.js.map