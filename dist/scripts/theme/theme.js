import e from"../constants.js";const s={name:"light",switchIcon:"fa-moon",css:"light-theme-css",isLoaded:!1},t={name:"dark",switchIcon:"fa-sun",css:"dark-theme-css",isLoaded:!1},n="color-theme-in-transition",c=1500,o={newTheme:t,oldTheme:s},a={newTheme:s,oldTheme:t},m="hidden-image",i=window.matchMedia(`(prefers-color-scheme: ${s.name})`);let r;export const getThemeFromPreference=()=>window.matchMedia(`(prefers-color-scheme: ${s.name})`).matches?s:t;export const getCurrentTheme=()=>r?.classList.contains(s.name)?s:r?.classList.contains(t.name)?t:null;export const themeSwitchEvent=e=>{const s=()=>{r.classList.add(n),setTimeout((()=>r.classList.remove(n)),c)},m=s=>d(s,e);return i.addEventListener("change",(e=>{s(),e.matches?m(a):m(o)})),()=>{s(),r.classList.contains(t.name)?m(a):m(o)}};const d=(s,t)=>{const{newTheme:n,oldTheme:c}=s;n.isLoaded||l(n),r&&(r.classList.add(n.name),c&&r.classList.remove(c.name)),t&&(t.classList.add(n.switchIcon),c&&t.classList.remove(c.switchIcon));document.querySelectorAll(".theme-background").forEach((e=>{e.classList.contains(n.name)&&e.classList.remove(m),c&&e.classList.contains(c.name)&&e.classList.add(m)}));const o=new CustomEvent(e.THEME_SWITCH_EVENT,{detail:s});window.dispatchEvent(o)},l=e=>{document.getElementById(e.css).removeAttribute("disabled"),e.isLoaded=!0};export const themeInit=async()=>{r=await(()=>{let e=100;return new Promise(((s,t)=>{const n=setInterval((()=>{const c=document.querySelector("body");c?(s(c),clearInterval(n)):--e<0&&(t("Could not query select body element"),clearInterval(n))}),10)}))})();const e=e=>d({newTheme:e},void 0);i.matches?e(s):e(t)};
//# sourceMappingURL=theme.js.map