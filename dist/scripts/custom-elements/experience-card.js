import{getFontAwesome as e}from"../utils/shadow-fa.js";import{createDNSPrefetch as t}from"../utils/links.js";export class ExperienceCard extends HTMLElement{externalSelector="slot[name=external-project-site]";flippedOnce=!1;flipped=!1;container;constructor(){super()}connectedCallback(){const t=document.getElementById("experience-card").content,s=this.attachShadow({mode:"open"});s.appendChild(t.cloneNode(!0)),this.container=s.querySelector(".container"),s.querySelectorAll("details").forEach((e=>e.onclick=e=>e.preventDefault())),s.querySelectorAll("button.flip-card").forEach((e=>e.addEventListener("click",this.flipCard.bind(this)))),this.duplicateClientTitle(),this.handleExternalLink(),e(s).finally()}duplicateClientTitle(){[this.shadowRoot.querySelector("slot[name=title]"),this.shadowRoot.querySelector("slot[name=client]")].forEach((e=>{const t=e.assignedNodes(),s=this.shadowRoot.querySelector(`.duplicate-${e.name}`);s.textContent="",t.forEach((e=>s.appendChild(e.cloneNode(!0))))}))}getExternalSiteSlot(){return this.shadowRoot.querySelector(this.externalSelector)}handleExternalLink(){const e=this.getExternalSiteSlot(),t=document.createElement("i");t.classList.add("fa-solid","fa-arrow-up-right-from-square");const s=e=>{e.insertAdjacentHTML("beforeend","&nbsp"),e.insertAdjacentHTML("beforeend","&nbsp"),e.appendChild(t)};e?.assignedNodes().length?e.assignedElements().filter((e=>e instanceof HTMLAnchorElement)).forEach((e=>{e.classList.add("button"),e.setAttribute("target","_blank"),s(e)})):s(e.querySelector("a"))}flipCard(){if(this.flipped)this.container.classList.remove("is-flipped"),this.shadowRoot.host.classList.remove("is-flipped"),this.flipped=!1;else if(this.container.classList.add("is-flipped"),this.shadowRoot.host.classList.add("is-flipped"),this.shadowRoot.host.dispatchEvent(new CustomEvent("flip-card",{detail:{flipped:!1}})),this.flipped=!0,!this.flippedOnce){const e=this.getExternalSiteSlot();if(e?.assignedElements()&&e.assignedElements()[0]instanceof HTMLAnchorElement){const s=e?.assignedElements()[0];this.appendChild(t(s))}this.flippedOnce=!0}}}
//# sourceMappingURL=experience-card.js.map